<div #wrapper *ngIf="stats"> 

<div class="copied-notification" *ngIf="copied">
  Copied!
</div>

<h3 class="bonfire">{{stats.name}} Combat information</h3>
<ul>
   <li>Health: <span style="color: #ffffff;" data-mce-style="color: #ffffff;"><strong>{{stats.health}}</strong> HP</span></li>
   <li>Poise: <span style="color: #ffffff;" data-mce-style="color: #ffffff;"><strong>{{stats.poise}}</strong></span></li>
</ul>
<div class="row">
   <div class="col-sm-6">
      <h4 class="special">Negations (or Absorptions)</h4>
      <div class="row">
         <div class="col-sm-6">
            <ul>
               <ng-container *ngTemplateOutlet="
                  physicalNegation;
                  context: {
                    type: 'Standard',
                    value: stats.absorptions.physical.standard
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  physicalNegation;
                  context: {
                    type: 'Slash',
                    value: stats.absorptions.physical.slash
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  physicalNegation;
                  context: {
                    type: 'Strike',
                    value: stats.absorptions.physical.strike
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  physicalNegation;
                  context: {
                    type: 'Pierce',
                    value: stats.absorptions.physical.pierce
                  }
               "></ng-container>
            </ul>
         </div>
         <div class="col-sm-6">
            <ul>
               <ng-container *ngTemplateOutlet="
                  elementalNegation;
                  context: {
                    type: 'Magic',
                    value: stats.absorptions.magic.magic,
                    color: '#3fbddd'
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  elementalNegation;
                  context: {
                    type: 'Fire',
                    value: stats.absorptions.magic.fire,
                    color: '#cc9d57'
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  elementalNegation;
                  context: {
                    type: 'Lightning',
                    value: stats.absorptions.magic.lightning,
                    color: '#d5d559'
                  }
               "></ng-container>
               <ng-container *ngTemplateOutlet="
                  elementalNegation;
                  context: {
                    type: 'Holy',
                    value: stats.absorptions.magic.holy,
                    color: '#ffcc99',
                    icon: '/file/Elden-Ring/holy_upgrade_affinity_elden_ring_wiki_guide_60px.jpg'
                  }
               "></ng-container>
            </ul>
         </div>
      </div>
      <p>The negation numbers are the % of your damage that gets blocked. For example, if a negation is 60, 40% of that damage by that type will go through and 60% will be negated. Bigger number = less damage. A negation of 100 means no damage goes through, and a negation of -100 mean the enemy takes 2x damage from that source. 0 means damage goes pretty much as is.</p>
   </div>
   <div class="col-sm-6">
      <h4 class="special">Resistances</h4>
      <ul>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Poison',
              value: stats.resistances.poison
            }
         "></ng-container>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Scarlet Rot',
              value: stats.resistances.scarletRot
            }
         "></ng-container>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Hemorrhage',
              value: stats.resistances.hemorrhage
            }
         "></ng-container>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Frostbite',
              value: stats.resistances.frostbite
            }
         "></ng-container>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Sleep',
              value: stats.resistances.sleep
            }
         "></ng-container>
         <ng-container *ngTemplateOutlet="
            resistance;
            context: {
              type: 'Madness',
              value: stats.resistances.madness
            }
         "></ng-container>
      </ul>
      <p>The resistance numbers are the buildup amount to trigger it. For example, if a resistance is 100 you must deal 100 points of the given buildup to trigger it. Note that these go down over time, and increase each time the effect procs.</p>
   </div>
</div>
</div>

<ng-template #physicalNegation let-type="type" let-value="value">
  <li>
    <a class="wiki_link" title="Elden Ring {{type}} Damage"
        href="https://eldenring.wiki.fextralife.com/{{type}}+Damage"
        attr.data-mce-href="/{{type}}+Damage">
      Physical ({{type}})</a>:
    <strong>{{value}}</strong>
  </li>
</ng-template>

<ng-template #elementalNegation
    let-type="type" let-value="value" let-color="color" let-icon="icon">
  <li>
    <a class="wiki_link" title="Elden Ring {{type}} Damage"
        style="color: {{color}};" attr.data-mce-style="color: {{color}};"
        href="https://eldenring.wiki.fextralife.com/{{type}}+Damage"
        attr.data-mce-href="/{{type}}+Damage">
      <img title="{{type}} Icon" alt="{{type}} Icon" width="20" height="20"
          src="https://eldenring.wiki.fextralife.com/{{icon || 'file/Elden-Ring/' + (type | lowercase) + '-upgrades-elden-ring-wiki-guide-30.png'}}"
          data-mce-src="/file/Elden-Ring/magic-upgrades-elden-ring-wiki-guide-30.png"
      >{{type}}</a>:
    <strong>{{value}}</strong>
  </li>
</ng-template>

<ng-template #resistance let-type="type" let-value="value" let-immune="immune">
  <li>
    <a class="wiki_link" title="{{type}}" attr.data-mce-href="/{{type}}"
        href="https://eldenring.wiki.fextralife.com/{{type}}">
      <img title="{{type}} Icon" alt="{{type}} Icon" width="20"
          src="https://eldenring.wiki.fextralife.com/file/Elden-Ring/{{type | lowercase | replace:' ':'_'}}_status_effect_elden_ring_wiki_guide_25px.png"
          attr.data-mce-src="/file/Elden-Ring/{{type | lowercase}}_status_effect_elden_ring_wiki_guide_25px.png"
      >{{type}}</a>:
    <strong>
      <ng-container *ngIf="value !== null; else other">{{value}}</ng-container>
      <ng-template #other>Immune</ng-template>
    </strong>
  </li>
</ng-template>

<ng-template #immune><strong>Immune</strong></ng-template>
